# ******************************************************************************#
#									LIBFT										#
# ******************************************************************************#


# ------------------------------------------------------------------------------#
#	Variables																	#
# ------------------------------------------------------------------------------#

NAME		:= libft.a
SRC_DIR		:= srcs
OBJ_DIR		:= obj
INC_DIR		:= inc

CC		:= cc
CFLAGS		:= -Wall -Wextra -Werror -I$(INC_DIR)
AR		:= ar
ARFLAGS	:= rcs
RM		:= rm -f
FIND		:= find

# ------------------------------------------------------------------------------#
#	Sources / Objects (recursive)												#
# ------------------------------------------------------------------------------#

SRCS	:= $(shell $(FIND) $(SRC_DIR) -type f -name '*.c')
OBJS	:= $(SRCS:$(SRC_DIR)/%.c=$(OBJ_DIR)/%.o)

# ------------------------------------------------------------------------------#
#	Rules																		#
# ------------------------------------------------------------------------------#

all: $(NAME)

$(NAME): $(OBJS)
	$(AR) $(ARFLAGS) $@ $^
	@printf '\033[32m[AR]\033[0m   %s built\n' $@

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c | $(OBJ_DIR)
	$(CC) $(CFLAGS) -c $< -o $@
	@printf '\033[34m[CC]\033[0m   %s\n' $<

$(OBJ_DIR):
	@mkdir -p $@

clean:
	@$(RM) $(OBJS)
	@$(RM) -r $(OBJ_DIR) 2>/dev/null || true

fclean: clean
	$(RM) $(NAME)

re: fclean all

.PHONY: all clean fclean re
